<!DOCTYPE html>
<html>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.3.3/d3.min.js"></script>
	<script src="./pcars_driver.js" charset="utf-8"></script>
	<script src="./lib/jquery-injectCSS/jquery.injectCSS.js" charset="utf-8"></script>
	
	<style type="text/css">

		
	</style>
</head>
<!--
	http://christopheviau.com/d3_tutorial/
-->
<body>
    <div id="viz1"></div>
    <div id="viz2"></div>

    <input type="checkbox" id="checkbox1" />

    <script type="text/javascript">


//Test Object;

	var DriverDummy		= new PCARSdriver();
		DriverDummy.SetExampleData();


//draw circle
    var sampleSVG = d3.select("#viz1")
        .append("svg");
 //       .attr("width", 200)
 ///       .attr("height", 200);    

    sampleSVG.append("circle")
        .style("stroke", "gray")
        .style("fill", "white")
        .attr("r", 40)
        .attr("cx", 50)
        .attr("cy", 50)
        .on("mouseover", function(){
		d3.select(this)
	//		.style("fill", "blue")
			.transition()
                        .duration(750)
                        .attr("r", function(d) { 	var tmp = d3.select(this);
							console.log("--- this1: ", tmp.attr("r")   ); 
							console.log("--- this2: ", tmp[0][0].attributes.r   );

							if (tmp.attr("r") <= 100) {
								return  tmp.attr("r") + 1;
							}else{
								return  10;
							}
						});
		})
       .on("mouseout", function(){d3.select(this).style("fill", "white");})
	.on("click", function(){d3.select(this).style("fill", "red");});

var sampleSVG2 = d3.select("#viz2")
        .append("svg");
//        .attr("width", 150)
//        .attr("height", 150);

    sampleSVG2.append("circle")
        .style("stroke", "gray")
        .style("fill", "grey")
        .attr("r", 20)
        .attr("cx", 30)
        .attr("cy", 30)

var sampleSVG3 = d3.select("#viz2")
        .append("svg");
//        .attr("width", 150)
//        .attr("height", 150);

    sampleSVG3.append("circle")
        .attr("r", 20)
        .attr("cx", 30)
        .attr("cy", 30)
        .attr("class", "TestCSSClass");
        
        

// D3 handling to select all svgs

	var svgs =      d3.select("body").selectAll("svg").each( function(obj) { 

				var tmp_obj = d3.select(this);

				console.log("---------- svg object:" , tmp_obj);

				tmp_obj.selectAll("circle")
				.transition()
	    			.duration(750)
				.attr("r", function(d) { return 26; });


				if (0)
				{
					tmp_obj.remove();
				}
				

                        });
	console.log(" --- svgs: " , svgs);

/*
	 var marker = _div.selectAll("svg")
     .data(_data, function (d) { return d.Key; })
     .each(transform) // update existing markers
      .enter().append("svg:svg")
     .each(transform)
     //.attr("class", "marker");
 		.attr("class", function (d){ return d.CSSTextClases });
*/
	



// Event handling Checkboxes

$('#checkbox1').click(function () {

	console.log("Checkbox click:" , this);
	
	if ($('#checkbox1').is(':checked') == false) {
		
		//remove a class
		ELEMENT.classList.remove("TestCSSClass");
	}

	if ($('#checkbox1').is(':checked') == true) {

             //alert(" is checked");
             
         ////// 1st solution
	     //$('#TestCSSClass').css('fill', 'green') ;
        
         ////// 2nd solution
             $.injectCSS({
            	    "circle.TestCSSClass": {
            	        "fill": "yellow"
            	    }
            	});         
         //////3rd solution
/*             
             $("<style>")
             .prop("type", "text/css")
             .html("\
           	circle.TestCSSClass{\
                 fill: green;\
                 border: 2px;\
             }")
             .appendTo("head");
*/         
     }

	
	
	
	
	
/*	
	if ($(this).attr('checked')) {
	        alert('is checked');
	} else {
	        alert('is not checked');
	}
*/
})







    </script>
</body>
</html>
